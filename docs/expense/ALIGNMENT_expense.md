# Alignment - 费用报销管理

## 项目特性规范

### 技术栈
- FastAPI + Pydantic
- 内存存储（与现有模式一致）
- OpenTelemetry 指标集成
- Simulator 流量模拟

### 现有代码模式
- 请求/响应使用 Pydantic BaseModel
- 状态机式流程（pending → approved/rejected → processed）
- 多级审批参考 `salary/adjustments` 模式
- 指标使用 Counter 计数器

## 原始需求
实现费用报销申请、审批、财务处理流程

## 需求理解

### 业务流程
1. 员工提交报销申请（含多个费用明细）
2. 主管审批（approve/reject）
3. 财务审核（verify）
4. 财务付款（pay）

### 报销类型
- 差旅费 (travel)
- 办公用品 (office_supplies)
- 餐饮费 (meals)
- 交通费 (transportation)
- 其他 (other)

### 金额审批规则（参考薪资调整模式）
- ≤ 500: 主管审批即可
- ≤ 2000: 需要经理审批
- > 2000: 需要总监审批

## 边界确认

### 包含
- 报销申请 CRUD
- 多费用明细项
- 多级审批流程
- 财务审核与付款
- 状态追踪与历史记录
- 指标统计
- 模拟器集成

### 不包含
- 附件/发票上传
- 实际支付集成
- 报销额度限制

## 验收标准
1. 可创建报销申请（含多个明细项）
2. 可进行审批决策
3. 财务可进行审核和付款
4. 有完整的状态流转
5. 有相关指标统计
6. 模拟器可生成报销流量
7. 测试通过
